<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cashback Campaign | Real Earning</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00c853;
            --secondary: #1a237e;
            --bg: #f4f7fa;
            --white: #ffffff;
            --nav-inactive: #9e9e9e;
            --danger: #ff5252;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background: var(--bg); color: #333; overflow-x: hidden; height: 100vh; position: relative; }

        /* Signup Page */
        #signupPage {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, var(--secondary), #3949ab); 
            display: flex; justify-content: center; align-items: center; 
            z-index: 5000; padding: 20px;
        }
        .signup-card {
            background: white; padding: 35px 25px; border-radius: 28px;
            width: 100%; max-width: 380px; text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.4);
            animation: slideUp 0.5s ease-out;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .signup-logo-container { display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 10px; }
        .signup-rupee-icon { width: 42px; height: 42px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.4rem; }

        /* Main App Header */
        #mainApp { display: none; }
        nav { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 0 5%; background: var(--white); box-shadow: 0 2px 15px rgba(0,0,0,0.05); 
            position: sticky; top: 0; z-index: 1000; height: 65px; 
        }
        .nav-left { display: flex; align-items: center; }
        .rupee-icon { width: 42px; height: 42px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.4rem; cursor: pointer; margin-right: 15px; }
        .logo { font-size: 1.1rem; font-weight: 800; color: var(--secondary); }
        .logo span { color: var(--primary); }
        
        /* Notification Drawer */
        #notifDrawer { position: fixed; top: 0; right: -100%; width: 100%; max-width: 350px; height: 100%; background: white; z-index: 5500; transition: 0.4s; box-shadow: -5px 0 20px rgba(0,0,0,0.1); }
        #notifDrawer.active { right: 0; }
        .notif-header { padding: 20px; background: var(--secondary); color: white; display: flex; justify-content: space-between; align-items: center; }
        .notif-list { padding: 10px; overflow-y: auto; height: calc(100% - 65px); }
        .notif-item { padding: 15px; border-bottom: 1px solid #f0f0f0; display: flex; align-items: flex-start; gap: 12px; }
        .notif-item i { font-size: 1.2rem; margin-top: 3px; color: var(--primary); }
        .notif-content h5 { font-size: 0.85rem; margin-bottom: 3px; color: #333; }
        .notif-content p { font-size: 0.75rem; color: #666; }

        /* Wallet Section */
        .wallet-section { padding: 30px 20px; background: linear-gradient(135deg, #1a237e 0%, #0d47a1 100%); border-radius: 0 0 35px 35px; text-align: center; }
        .profit-card { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border-radius: 20px; padding: 20px; border: 1px solid rgba(255, 255, 255, 0.1); width: 100%; max-width: 320px; display: inline-block; }
        .live-tag { color: #00c853; font-size: 0.65rem; font-weight: 700; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; gap: 5px; }
        .dot { width: 6px; height: 6px; background: #00c853; border-radius: 50%; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
        .balance-val { font-size: 2.4rem; font-weight: 800; color: white; margin-bottom: 10px; }
        .complete-task-btn { background: var(--white); color: var(--secondary); padding: 8px 20px; border-radius: 20px; font-size: 0.85rem; font-weight: 700; display: inline-block; text-decoration: none; cursor: pointer; }

        /* Task Cards */
        .task-card { display: flex; align-items: center; padding: 15px; margin: 12px 20px; background: white; border-radius: 16px; border: 1px solid #eee; }
        .task-img { width: 48px; height: 48px; border-radius: 12px; margin-right: 15px; object-fit: contain; }
        
        /* Bottom Navbar */
        .bottom-bar { position: fixed; bottom: 0; width: 100%; max-width: 500px; background: white; display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid #efefef; left: 50%; transform: translateX(-50%); z-index: 2000; }
        .nav-item { text-align: center; font-size: 0.65rem; color: var(--nav-inactive); cursor: pointer; flex: 1; font-weight: 500; }
        .nav-item i { font-size: 1.3rem; margin-bottom: 4px; display: block; }
        .nav-item.active { color: var(--primary); }
        
        /* Buttons & Inputs */
        .signup-btn { width: 100%; padding: 14px; background: var(--primary); color: white; border: none; border-radius: 12px; font-weight: 700; cursor: pointer; transition: 0.3s; }
        .signup-btn:active { transform: scale(0.95); }
        .view { display: none; padding-bottom: 90px; }
        .view.active { display: block; }
        .overlay-bg { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.4); z-index:5400; display:none; }

        .privacy-card { background: white; margin: 20px; padding: 20px; border-radius: 15px; border: 1px solid #eee; text-align: left; }
        .privacy-card h4 { font-size: 0.9rem; color: var(--secondary); margin-bottom: 10px; }
        .privacy-card p { font-size: 0.7rem; color: #666; line-height: 1.5; margin-bottom: 8px; }

        #toast { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); background: #333; color: white; padding: 10px 20px; border-radius: 20px; font-size: 0.8rem; display: none; z-index: 6000; }
    </style>
</head>
<body>

    <div id="toast">Copied Successfully!</div>

    <div id="signupPage">
        <div class="signup-card">
            <div class="signup-logo-container">
                <div class="signup-rupee-icon">₹</div>
                <h2 style="color: var(--secondary); font-size: 1.6rem;"><span style="color: var(--primary);">Campaign</span></h2>
            </div>
            <p style="color:#777; font-size: 0.85rem; margin-bottom: 25px;">Create your account to start earning</p>
            <div style="text-align: left;">
                <label style="font-size: 0.75rem; font-weight: 700; color: #555;">Full Name</label>
                <input type="text" id="userNameInput" style="width:100%; padding:14px; margin:6px 0 18px; border:1.5px solid #eee; border-radius:10px; outline: none;" placeholder="e.g. Rahul Kumar">
                <label style="font-size: 0.75rem; font-weight: 700; color: #555;">Mobile Number</label>
                <input type="number" id="userPhoneInput" style="width:100%; padding:14px; margin:6px 0 25px; border:1.5px solid #eee; border-radius:10px; outline: none;" placeholder="10 Digit Mobile Number">
            </div>
            <button class="signup-btn" onclick="handleSignup()">Get Started Now</button>
        </div>
    </div>

    <div id="mainApp">
        <nav>
            <div class="nav-left">
                <div class="rupee-icon">₹</div>
                <div class="logo">Cashback <span>Campaign</span></div>
            </div>
            <div class="notif-bell" onclick="toggleNotif()" style="position: relative; font-size: 1.5rem; color: var(--danger); cursor: pointer;">
                <i class="fa-solid fa-bell"></i>
                <div style="position: absolute; top: 2px; right: 2px; background: var(--secondary); color: white; font-size: 0.6rem; width: 16px; height: 16px; border-radius: 50%; display: flex; align-items: center; justify-content: center; border: 2px solid white;">4</div>
            </div>
        </nav>

        <div id="homeView" class="view active">
            <div class="wallet-section">
                <div class="profit-card">
                    <div class="live-tag"><span class="dot"></span> Live User Profit</div>
                    <div class="balance-val">₹<span id="globalProfit">12,45,000</span></div>
                    <div class="complete-task-btn" onclick="switchView('tasksView', document.getElementById('nav-tasksView'))">
                        <i class="fa-solid fa-circle-check"></i> Complete task and earn
                    </div>
                </div>
            </div>
            <h4 style="margin: 25px 20px 10px; font-size: 1rem; color: var(--secondary); font-weight: 700;">Recommended Tasks</h4>
            <div id="homeTasks"></div>
        </div>

        <div id="tasksView" class="view">
            <h4 style="padding: 20px; font-size: 1.1rem; font-weight: 700;">Explore All Tasks</h4>
            <div id="allTasks"></div>
        </div>

        <div id="referView" class="view">
            <div style="padding: 50px 20px; text-align: center;">
                <i class="fa-solid fa-share-nodes" style="font-size: 3rem; color: var(--primary); margin-bottom: 20px;"></i>
                <h3>Refer & Earn</h3>
                <p style="color: #666; margin-bottom: 30px;">Invite friends and get more task rewards.</p>
                <div style="background:#f9f9f9; padding:18px; border-radius:15px; font-weight:700; border: 2px dashed var(--primary); color: var(--secondary);">CB-PRO-2026</div>
                <button class="signup-btn" style="margin-top: 25px;" onclick="copyReferLink()">Copy Invite Link</button>
            </div>
        </div>

        <div id="profileView" class="view">
            <div style="text-align: center; padding: 40px 20px 20px;">
                <div style="width:80px; height:80px; background:#e8eaf6; border-radius:50%; margin: 0 auto 15px; display: flex; align-items: center; justify-content: center; font-size: 2rem; color: var(--secondary);"><i class="fa-solid fa-user"></i></div>
                <h2 id="profName">User Name</h2>
                <p id="profPhone" style="color: #888;">+91 0000000000</p>
            </div>

            <div class="privacy-card">
                <h4><i class="fa-solid fa-shield-halved"></i> Earning Privacy Policy</h4>
                <p>• <b>Verification:</b> Cashback is only credited after the brand confirms a successful task completion.</p>
                <p>• <b>Rewards:</b> All earnings are processed within 24-48 hours of task validation.</p>
                <p>• <b>Security:</b> We do not store your bank passwords.</p>
                <p>• <b>Referral:</b> Referral bonuses are added once the referee completes their first task.</p>
            </div>

            <div style="padding: 0 20px;">
                <button class="signup-btn" style="background:#ff5252;" onclick="handleSignOut()">Logout Account</button>
            </div>
        </div>

        <div class="bottom-bar">
            <div class="nav-item active" id="nav-homeView" onclick="switchView('homeView', this)"><i class="fa-solid fa-house"></i>Home</div>
            <div class="nav-item" id="nav-tasksView" onclick="switchView('tasksView', this)"><i class="fa-solid fa-layer-group"></i>Tasks</div>
            <div class="nav-item" id="nav-referView" onclick="switchView('referView', this)"><i class="fa-solid fa-user-plus"></i>Refer</div>
            <div class="nav-item" id="nav-profileView" onclick="switchView('profileView', this)"><i class="fa-solid fa-circle-user"></i>Profile</div>
        </div>
    </div>

    <div class="overlay-bg" id="notifOverlay" onclick="toggleNotif()"></div>
    <div id="notifDrawer">
        <div class="notif-header">
            <h4>Notifications</h4>
            <i class="fa-solid fa-xmark" onclick="toggleNotif()" style="cursor:pointer; font-size: 1.2rem;"></i>
        </div>
        <div class="notif-list" id="notifList">
            <div class="notif-item">
                <i class="fa-solid fa-circle-check"></i>
                <div class="notif-content">
                    <h5>Navi App Offer</h5>
                    <p>Complete Navi task now and get ₹50 instant cashback in your wallet.</p>
                </div>
            </div>
            <div class="notif-item">
                <i class="fa-solid fa-circle-check"></i>
                <div class="notif-content">
                    <h5>Google Pay Reward</h5>
                    <p>Earn ₹21 by completing the Google Pay refer and earn task.</p>
                </div>
            </div>
            <div class="notif-item">
                <i class="fa-solid fa-circle-check"></i>
                <div class="notif-content">
                    <h5>PhonePe Cashback</h5>
                    <p>New task available: Get ₹100 for your first transaction via PhonePe.</p>
                </div>
            </div>
            <div class="notif-item">
                <i class="fa-solid fa-circle-check"></i>
                <div class="notif-content">
                    <h5>Paytm Cash</h5>
                    <p>Claim your ₹80 Paytm cash by finishing the app install task.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const taskList = [
            { name: "Navi App", amt: 50, img: "https://www.navi.com/favicon.ico", link: "https://r.navi.com/2sB8xB" },
            { name: "Google Pay", amt: 21, img: "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Google_Pay_Logo.svg/512px-Google_Pay_Logo.svg.png", link: "https://g.co/payinvite/5d1ru0n" },
            { name: "PhonePe", amt: 100, img: "https://download.logo.wine/logo/PhonePe/PhonePe-Logo.wine.png", link: "https://phon.pe/xhsix8el" },
            { name: "Paytm Cash", amt: 80, img: "https://download.logo.wine/logo/Paytm/Paytm-Logo.wine.png", link: "https://p.paytm.me/xCTH/xa0azynq?utmt=010519" }
        ];

        // --- Back Gesture Logic ---
        window.onpopstate = function(event) {
            const activeView = document.querySelector('.view.active').id;
            if (activeView !== 'homeView') {
                // Home par wapas bhejein
                switchView('homeView', document.getElementById('nav-homeView'), false);
            }
        };

        function handleSignup() {
            const name = document.getElementById('userNameInput').value;
            const phone = document.getElementById('userPhoneInput').value;
            if(name.length < 3 || phone.length < 10) return alert("Enter valid details");
            localStorage.setItem('cb_session', JSON.stringify({name, phone}));
            showMain(name, phone);
        }

        function showMain(name, phone) {
            document.getElementById('signupPage').style.display = 'none';
            document.getElementById('mainApp').style.display = 'block';
            document.getElementById('profName').innerText = name;
            document.getElementById('profPhone').innerText = "+91 " + phone;
            // Home state push karein
            history.pushState({view: 'homeView'}, "");
        }

        function renderTasks() {
            const h = document.getElementById('homeTasks'), a = document.getElementById('allTasks');
            h.innerHTML = ''; a.innerHTML = '';
            taskList.forEach((t, i) => {
                const card = `<div class="task-card"><img src="${t.img}" class="task-img" onerror="this.src='https://cdn-icons-png.flaticon.com/512/5968/5968279.png'"><div style="flex:1"><h4>${t.name}</h4><p style="color:var(--primary); font-size:0.75rem;">Earn upto ₹${t.amt}</p></div><button style="border:none; background:var(--secondary); color:white; padding:7px 15px; border-radius:8px; font-size:0.75rem;" onclick="window.open('${t.link}', '_blank')">Claim</button></div>`;
                if(i < 4) h.innerHTML += card;
                a.innerHTML += card;
            });
        }

        function switchView(viewId, el, shouldPush = true) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            if(el) el.classList.add('active');
            
            // Back gesture ke liye history maintain karein
            if(shouldPush && viewId !== 'homeView') {
                history.pushState({view: viewId}, "");
            }
        }

        function toggleNotif() {
            const drawer = document.getElementById('notifDrawer'), overlay = document.getElementById('notifOverlay');
            drawer.classList.toggle('active');
            overlay.style.display = drawer.classList.contains('active') ? 'block' : 'none';
        }

        function copyReferLink() {
            navigator.clipboard.writeText("https://bit.ly/4pppHbZ").then(() => {
                const toast = document.getElementById('toast');
                toast.style.display = 'block';
                setTimeout(() => { toast.style.display = 'none'; }, 2000);
            });
        }

        function handleSignOut() {
            if(confirm("Are you sure you want to logout?")) {
                localStorage.removeItem('cb_session');
                window.location.reload(); 
            }
        }

        window.onload = () => {
            const session = localStorage.getItem('cb_session');
            if(session) { 
                const u = JSON.parse(session); 
                showMain(u.name, u.phone); 
            } else {
                document.getElementById('signupPage').style.display = 'flex';
                document.getElementById('mainApp').style.display = 'none';
            }
            renderTasks();
            setInterval(() => {
                let p_el = document.getElementById('globalProfit');
                if(p_el) {
                    let p = parseInt(p_el.innerText.replace(/,/g, ''));
                    p_el.innerText = (p + Math.floor(Math.random()*500)).toLocaleString('en-IN');
                }
            }, 3000);
        };
    </script>
</body>
</html>
